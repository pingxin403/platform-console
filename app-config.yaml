app:
  title: Internal Developer Platform
  baseUrl: http://localhost:3000

organization:
  name: My Company

backend:
  # Used for enabling authentication, secret is shared by all backend plugins
  # See https://backstage.io/docs/auth/service-to-service-auth for
  # information on the format
  auth:
    keys:
      - secret: ${BACKEND_SECRET}
  baseUrl: http://localhost:7007
  listen:
    port: 7007
    # Uncomment the following host directive to bind to specific interfaces
    # host: 127.0.0.1
  csp:
    connect-src: ["'self'", 'http:', 'https:']
    # Content-Security-Policy directives follow the Helmet format: https://helmetjs.github.io/#reference
    # Default Helmet Content-Security-Policy values can be removed by setting the key to false
  cors:
    origin: http://localhost:3000
    methods: [GET, HEAD, PATCH, POST, PUT, DELETE]
    credentials: true
  # PostgreSQL database configuration with connection pooling
  database:
    client: pg
    connection:
      host: ${POSTGRES_HOST}
      port: ${POSTGRES_PORT}
      user: ${POSTGRES_USER}
      password: ${POSTGRES_PASSWORD}
      database: ${POSTGRES_DB}
      ssl: ${POSTGRES_SSL}
    # Connection pool configuration for production
    pool:
      min: 2
      max: 10
      acquireTimeoutMillis: 30000
      createTimeoutMillis: 30000
      destroyTimeoutMillis: 5000
      idleTimeoutMillis: 30000
      reapIntervalMillis: 1000
      createRetryIntervalMillis: 200
  # Health check configuration
  healthcheck:
    enabled: true
    path: /api/catalog/health
  # Logging configuration
  logging:
    level: ${LOG_LEVEL:-info}
    format: json
    redactSecrets: true

# Search configuration for enhanced discovery
search:
  # PostgreSQL search engine configuration
  pg:
    # Enable full-text search
    enabled: true
    # Search result highlighting
    highlightPreTag: '<mark>'
    highlightPostTag: '</mark>'
  # Search indexing configuration
  indexing:
    # Batch size for indexing operations
    batchSize: 1000
    # Index refresh interval
    refreshInterval: 600 # 10 minutes
  # Search result configuration
  results:
    # Maximum results per page
    maxResults: 25
    # Default results per page
    defaultResults: 10
    # Enable search suggestions
    suggestions: true
  # Search collators configuration
  collators:
    # Catalog search collator
    catalog:
      # Enable catalog entity search
      enabled: true
      # Index all entity types
      entityTypes: ['Component', 'API', 'Resource', 'System', 'Domain', 'Location', 'User', 'Group']
      # Search fields
      fields: ['metadata.name', 'metadata.description', 'metadata.tags', 'spec.owner']
    # TechDocs search collator
    techdocs:
      # Enable documentation search
      enabled: true
      # Index all documentation
      indexAll: true
      # Search fields
      fields: ['title', 'text', 'location']
      # Boost recent documents
      recencyBoost: 1.2

integrations:
  github:
    - host: github.com
      # This is a Personal Access Token or PAT from GitHub. You can find out how to generate this token, and more information
      # about setting up the GitHub integration here: https://backstage.io/docs/integrations/github/locations#configuration
      token: ${GITHUB_TOKEN}
    ### Example for how to add your GitHub Enterprise instance using the API:
    # - host: ghe.example.net
    #   apiBaseUrl: https://ghe.example.net/api/v3
    #   token: ${GHE_TOKEN}

proxy:
  ### Example for how to add a proxy endpoint for the frontend.
  ### A typical reason to do this is to handle HTTPS and CORS for internal services.
  # endpoints:
  #   '/test':
  #     target: 'https://example.com'
  #     changeOrigin: true
  
  # Datadog API proxy for secure API calls
  endpoints:
    '/datadog/api':
      target: 'https://api.datadoghq.com'
      changeOrigin: true
      headers:
        DD-API-KEY: ${DATADOG_API_KEY}
        DD-APPLICATION-KEY: ${DATADOG_APP_KEY}
    
    # Sentry API proxy for secure API calls
    '/sentry/api':
      target: 'https://sentry.io/api/0'
      changeOrigin: true
      headers:
        Authorization: 'Bearer ${SENTRY_TOKEN}'
    
    # Prometheus API proxy for secure API calls
    '/prometheus/api':
      target: ${PROMETHEUS_URL}
      changeOrigin: true
      # headers:
      #   Authorization: 'Basic ${PROMETHEUS_AUTH_TOKEN}'
    
    # Grafana API proxy for secure API calls
    '/grafana/api':
      target: ${GRAFANA_URL}
      changeOrigin: true
      headers:
        Authorization: 'Bearer ${GRAFANA_TOKEN}'
    
    # GitHub API proxy for CI/CD statistics
    '/github':
      target: 'https://api.github.com'
      changeOrigin: true
      headers:
        Authorization: 'token ${GITHUB_TOKEN}'
        Accept: 'application/vnd.github.v3+json'
    
    # Jaeger API proxy for distributed tracing
    '/jaeger/api':
      target: ${JAEGER_URL:-http://localhost:16686}
      changeOrigin: true
      # Optional authentication headers
      # headers:
      #   Authorization: 'Basic ${JAEGER_AUTH_TOKEN}'
    
    # Vault API proxy for secrets management
    '/vault/api':
      target: ${VAULT_URL:-http://localhost:8200}
      changeOrigin: true
      headers:
        X-Vault-Token: ${VAULT_TOKEN}
    
    # Nexus Repository Manager API proxy for artifact management
    '/nexus/api':
      target: ${NEXUS_URL:-http://localhost:8081}
      changeOrigin: true
      headers:
        Authorization: 'Basic ${NEXUS_AUTH_TOKEN}'
    
    # Argo CD API proxy for GitOps cluster management
    '/argocd/api':
      target: ${ARGOCD_API_URL}
      changeOrigin: true
      headers:
        Authorization: 'Bearer ${ARGOCD_TOKEN}'
    
    # Kiali API proxy for service mesh observability
    '/kiali/api':
      target: ${KIALI_URL:-http://localhost:20001}
      changeOrigin: true
      headers:
        Authorization: 'Basic ${KIALI_AUTH_TOKEN}'

# Datadog configuration for dashboard embedding
datadog:
  # Datadog API configuration
  api:
    baseUrl: 'https://api.datadoghq.com'
    apiKey: ${DATADOG_API_KEY}
    appKey: ${DATADOG_APP_KEY}
  # Dashboard configuration
  dashboard:
    # Base URL for dashboard embedding
    baseUrl: 'https://app.datadoghq.com'
    # Default time range for dashboards
    timeRange: '1h'
    # Enable secure iframe embedding
    secureEmbedding: true

# Sentry configuration for error tracking
sentry:
  organization: ${SENTRY_ORG}
  # Sentry API configuration
  api:
    baseUrl: 'https://sentry.io/api/0'
    token: ${SENTRY_TOKEN}

# Security Insights configuration
securityInsights:
  # GitHub integration for vulnerability scanning
  github:
    token: ${GITHUB_TOKEN}
  # Dependabot configuration
  dependabot:
    enabled: true
    # Alert filtering
    severityLevels: ['critical', 'high', 'medium']

# Prometheus configuration for metrics
prometheus:
  # Prometheus server configuration
  api:
    baseUrl: ${PROMETHEUS_URL}
    # Optional authentication
    # username: ${PROMETHEUS_USERNAME}
    # password: ${PROMETHEUS_PASSWORD}
  # Default query configuration
  queries:
    # Default time range for queries
    defaultTimeRange: '1h'
    # Default step for range queries
    defaultStep: '15s'

# Grafana configuration for dashboards
grafana:
  # Grafana server configuration
  api:
    baseUrl: ${GRAFANA_URL}
    # Authentication token
    token: ${GRAFANA_TOKEN}
  # Dashboard configuration
  dashboard:
    # Default time range for dashboards
    defaultTimeRange: '1h'
    # Enable dashboard embedding
    enableEmbedding: true

# Lighthouse configuration for performance monitoring
lighthouse:
  # Lighthouse audit service configuration
  baseUrl: ${LIGHTHOUSE_AUDIT_SERVICE_URL:-http://localhost:3003}
  # Optional authentication
  # token: ${LIGHTHOUSE_TOKEN}

# GitHub Actions configuration for CI/CD visibility
githubActions:
  # GitHub integration for workflow visibility
  github:
    token: ${GITHUB_TOKEN}
  # Workflow configuration
  workflows:
    # Enable workflow run display and re-trigger capabilities
    enableRerun: true
    # Show workflow history
    showHistory: true
    # Default number of workflow runs to display
    defaultLimit: 25

# GitHub Pull Requests configuration for PR management
githubPullRequests:
  # GitHub integration for PR visibility
  github:
    token: ${GITHUB_TOKEN}
  # Pull request configuration
  pullRequests:
    # Show PR status and team collaboration features
    showStatus: true
    # Enable PR metrics and review workflow integration
    showMetrics: true
    # Default number of PRs to display
    defaultLimit: 10

# CI/CD Statistics configuration for build analytics
cicdStatistics:
  # GitHub Actions integration for build performance tracking
  github:
    token: ${GITHUB_TOKEN}
  # Build analytics configuration
  builds:
    # Show build duration and success rate metrics
    showMetrics: true
    # Enable trend analysis and performance benchmarking
    showTrends: true
    # Default number of builds to display
    defaultLimit: 50
    # Time range for analytics (in days)
    defaultTimeRange: 30

# GitHub Insights configuration for release tracking and repository analytics
githubInsights:
  # GitHub integration for repository analytics
  github:
    token: ${GITHUB_TOKEN}
  # Repository insights configuration
  insights:
    # Show release tracking and changelog generation
    showReleases: true
    # Show repository activity and contributor insights
    showActivity: true
    # Show code quality metrics
    showLanguages: true
    # Default number of releases to display
    defaultReleaseLimit: 10

# Jaeger configuration for distributed tracing
jaeger:
  # Jaeger server configuration
  api:
    baseUrl: ${JAEGER_URL:-http://localhost:16686}
    # Optional authentication
    # username: ${JAEGER_USERNAME}
    # password: ${JAEGER_PASSWORD}
  # Tracing configuration
  tracing:
    # Default time range for traces
    defaultTimeRange: '1h'
    # Default limit for trace queries
    defaultLimit: 20
    # Enable trace visualization and service dependency mapping
    enableVisualization: true

# Vault configuration for secrets management
vault:
  # Vault server configuration
  api:
    baseUrl: ${VAULT_URL:-http://localhost:8200}
    # Vault authentication token
    token: ${VAULT_TOKEN}
  # Secrets configuration
  secrets:
    # Default mount path for secrets
    defaultMountPath: 'secret'
    # Enable secret access and rotation status display
    showRotationStatus: true
    # Integration with AWS Secrets Manager workflow
    awsSecretsManager:
      enabled: ${VAULT_AWS_INTEGRATION:-false}
      region: ${AWS_REGION:-us-east-1}

# Nexus Repository Manager configuration for artifact management
nexusRepositoryManager:
  # Nexus server configuration
  api:
    baseUrl: ${NEXUS_URL:-http://localhost:8081}
    # Nexus authentication
    username: ${NEXUS_USERNAME}
    password: ${NEXUS_PASSWORD}
  # Artifact management configuration
  artifacts:
    # Enable artifact version tracking and dependency management
    showVersions: true
    # Show build artifact visibility
    showArtifacts: true
    # Default number of artifacts to display
    defaultLimit: 20
    # Integration with existing Nexus instance
    repositories:
      - name: 'maven-public'
        type: 'maven2'
      - name: 'npm-public'
        type: 'npm'
      - name: 'docker-public'
        type: 'docker'

# Terraform configuration for infrastructure as code visibility
terraform:
  # Terraform Cloud/Enterprise API configuration
  apiBaseUrl: ${TERRAFORM_API_BASE_URL:-https://app.terraform.io}
  token:
    $env: TERRAFORM_TOKEN
  # Terraform workspace configuration
  workspaces:
    # Default workspace for infrastructure
    default: 'production'
    # Available workspaces
    available: ['development', 'staging', 'production']
  # Integration with AWS EKS and infrastructure workflows
  integration:
    aws:
      enabled: true
      region: ${AWS_REGION:-us-east-1}
    kubernetes:
      enabled: true
      cluster: ${K8S_CLUSTER_NAME:-production}

# GitOps Profiles configuration for multi-cluster management
gitopsProfiles:
  # GitOps API backend URL
  apiBaseUrl: ${GITOPS_API_BASE_URL:-http://localhost:3008}
  # Multi-cluster deployment configuration
  clusters:
    # Production cluster configuration
    production:
      name: 'production'
      url: ${K8S_CLUSTER_URL}
      region: ${AWS_REGION:-us-east-1}
    # Staging cluster configuration
    staging:
      name: 'staging'
      url: ${K8S_STAGING_CLUSTER_URL}
      region: ${AWS_REGION:-us-east-1}
    # Development cluster configuration
    development:
      name: 'development'
      url: ${K8S_DEV_CLUSTER_URL}
      region: ${AWS_REGION:-us-east-1}

# Argo CD configuration for GitOps deployment management
argocd:
  # Argo CD server configuration
  api:
    baseUrl: ${ARGOCD_API_URL}
    # Authentication token
    token: ${ARGOCD_TOKEN}
  # Application configuration
  applications:
    # Enable multi-cluster deployment status and health monitoring
    showHealth: true
    # Show cluster resource utilization and capacity planning
    showResources: true
    # Default number of applications to display
    defaultLimit: 50
  # Cluster configuration
  clusters:
    # Enable multi-environment support
    multiEnvironment: true
    # Default environments
    environments: ['development', 'staging', 'production']

# Kiali configuration for service mesh observability
kiali:
  # Kiali server configuration
  api:
    baseUrl: ${KIALI_URL:-http://localhost:20001}
    # Optional authentication
    username: ${KIALI_USERNAME}
    password: ${KIALI_PASSWORD}
    # Or use token-based authentication
    # token: ${KIALI_TOKEN}
  # Service mesh configuration
  serviceMesh:
    # Enable service topology and traffic flow monitoring
    showTopology: true
    # Enable distributed tracing and performance analysis
    showTracing: true
    # Integration with Istio service mesh
    istio:
      enabled: true
      namespace: 'istio-system'
    # Metrics configuration
    metrics:
      # Default time range for metrics
      defaultTimeRange: '1h'
      # Enable performance bottleneck identification
      showPerformance: true

# Kubelog configuration for Kubernetes log viewing
kubelog:
  # Kubelog backend configuration
  backend:
    # Enable centralized log access
    enabled: true
    # Log streaming and search configuration
    streaming:
      enabled: true
      # Real-time log monitoring capabilities
      realTime: true
    # Log filtering configuration
    filtering:
      enabled: true
      # Default log level filter
      defaultLevel: 'info'
  # Kubernetes cluster configuration for log access
  clusters:
    # Production cluster logs
    production:
      name: 'production'
      # Kwirth service URL for log access
      kwirthUrl: ${KWIRTH_PRODUCTION_URL}
      # Authentication for log access
      token: ${K8S_SERVICE_ACCOUNT_TOKEN}
    # Staging cluster logs
    staging:
      name: 'staging'
      kwirthUrl: ${KWIRTH_STAGING_URL}
      token: ${K8S_STAGING_SERVICE_ACCOUNT_TOKEN}
    # Development cluster logs
    development:
      name: 'development'
      kwirthUrl: ${KWIRTH_DEV_URL}
      token: ${K8S_DEV_SERVICE_ACCOUNT_TOKEN}

# Jenkins configuration for CI/CD integration (optional)
jenkins:
  # Jenkins server configuration
  instances:
    - name: default
      baseUrl: ${JENKINS_BASE_URL:-http://localhost:8080}
      username: ${JENKINS_USERNAME}
      apiKey: ${JENKINS_API_KEY}
  # Build configuration
  builds:
    # Show build pipeline visibility and control
    showPipelines: true
    # Show build history display
    showHistory: true
    # Default number of builds to display
    defaultLimit: 25

# DevTools plugin configuration for diagnostics
devtools:
  # System health monitoring and configuration visibility
  monitoring:
    # Enable system health monitoring
    enabled: true
    # Show OS, Node/Backstage and package versions
    versions: true
    # Show live config with secret masking
    config: true
    # Enable secret masking for security
    secretMasking: true
  # Dependency checking and troubleshooting tools
  dependencies:
    # Enable external dependency checks
    enabled: true
    # Check database connectivity
    database: true
    # Check external service connectivity
    externalServices: true
    # Timeout for dependency checks (ms)
    timeout: 5000
  # Runtime diagnostics
  diagnostics:
    # Enable runtime diagnostics
    enabled: true
    # Show memory usage
    memory: true
    # Show CPU usage
    cpu: true
    # Show uptime information
    uptime: true

# Toolbox plugin configuration for developer utilities
toolbox:
  # Developer utility tools configuration
  tools:
    # Enable converters and validators
    converters: true
    validators: true
    # Enable JWT decoding utility
    jwt: true
    # Enable QR code generation
    qrCode: true
    # Enable barcode generation
    barcode: true
    # Enable other common development tools
    utilities: true
  # Favorites and personalization
  favorites:
    # Enable favorites functionality
    enabled: true
    # Allow users to customize tool order
    customOrder: true
  # Internationalization support
  i18n:
    # Enable internationalization
    enabled: true
    # Default language
    defaultLanguage: 'en'

# TODO plugin configuration for code quality tracking
todo:
  # TODO/FIXME comment aggregation and reporting
  aggregation:
    # Enable TODO comment scanning
    enabled: true
    # Supported comment types
    commentTypes: ['TODO', 'FIXME', 'HACK', 'BUG', 'NOTE']
    # File extensions to scan
    fileExtensions: ['.ts', '.tsx', '.js', '.jsx', '.py', '.java', '.go', '.rs', '.cpp', '.c', '.h']
  # Code quality metrics and improvement tracking
  metrics:
    # Enable code quality tracking
    enabled: true
    # Track TODO density per file
    density: true
    # Track TODO age (days since creation)
    age: true
    # Track TODO priority based on comment type
    priority: true
  # Integration with version control
  vcs:
    # Enable Git integration for TODO tracking
    git: true
    # Track TODO author information
    authors: true
    # Track TODO creation date
    creationDate: true

# gRPC Playground configuration for service testing and exploration
grpcPlayground:
  # gRPC service discovery and testing capabilities
  discovery:
    # Enable automatic gRPC service discovery
    enabled: true
    # Support for different gRPC service types
    supportedTypes: ['grpc', 'grpc-web']
  # Protocol buffer documentation and testing
  protobuf:
    # Enable protocol buffer documentation
    documentation: true
    # Support for proto file imports
    imports: true
    # Default proto file location
    defaultPath: '/proto'
  # gRPC testing capabilities
  testing:
    # Enable gRPC service testing interface
    enabled: true
    # Support for TLS connections
    tls: true
    # Default testing environment
    defaultEnvironment: 'development'
    # Request timeout in milliseconds
    timeout: 30000

# API Documentation configuration for OpenAPI, AsyncAPI, and GraphQL
apiDocs:
  # Enable automatic API documentation generation and display
  generator:
    # Support for OpenAPI specifications
    openapi:
      enabled: true
      # Automatic generation from code annotations
      autoGenerate: true
      # Default OpenAPI version
      version: '3.0.0'
    # Support for AsyncAPI specifications
    asyncapi:
      enabled: true
      # Automatic generation from message schemas
      autoGenerate: true
      # Default AsyncAPI version
      version: '2.6.0'
    # Support for GraphQL schemas
    graphql:
      enabled: true
      # Automatic schema introspection
      autoIntrospect: true
      # GraphQL playground integration
      playground: true
  # API testing and exploration capabilities
  testing:
    # Enable API testing interface
    enabled: true
    # Support for different API types
    supportedTypes: ['openapi', 'asyncapi', 'graphql']
    # Default testing environment
    defaultEnvironment: 'development'
  # API documentation display settings
  display:
    # Show API examples and schemas
    showExamples: true
    # Show API authentication requirements
    showAuth: true
    # Show API rate limits and usage
    showLimits: true
    # Enable interactive API explorer
    interactiveExplorer: true
  # SDK generation configuration for automated SDK generation
  sdkGeneration:
    # Enable SDK generation from OpenAPI specifications
    enabled: true
    # Supported programming languages for SDK generation
    supportedLanguages: ['java', 'go', 'typescript', 'javascript', 'python']
    # SDK generation templates
    templates:
      java: 'openapi-generator-java'
      go: 'openapi-generator-go'
      typescript: 'openapi-generator-typescript'
      javascript: 'openapi-generator-javascript'
      python: 'openapi-generator-python'
    # SDK publishing and distribution workflows
    publishing:
      # Enable automatic SDK publishing
      enabled: true
      # Publishing targets
      targets: ['npm', 'maven', 'go-modules', 'pypi']
      # Versioning strategy
      versioning: 'semantic'
    # SDK documentation generation
    documentation:
      # Generate SDK documentation
      enabled: true
      # Documentation formats
      formats: ['markdown', 'html']
      # Include code examples
      examples: true

# TechDocs configuration with S3 storage and MkDocs
# Production-ready setup with automatic documentation generation and S3 publishing
# https://backstage.io/docs/features/techdocs/how-to-guides#how-to-migrate-from-techdocs-basic-to-recommended-deployment-approach
techdocs:
  # Use external builder for production (CI/CD generates docs)
  builder: 'external' # Alternatives - 'local'
  generator:
    # Run MkDocs in Docker for consistent builds
    runIn: 'docker' # Alternatives - 'local'
    # MkDocs configuration
    mkdocs:
      # Default MkDocs configuration
      defaultPlugins: ['search', 'mkdocs-techdocs-core']
      # Additional plugins for enhanced documentation
      additionalPlugins: ['mermaid2', 'plantuml-markdown']
  publisher:
    # Use AWS S3 for production storage
    type: 'awsS3' # Alternatives - 'local', 'googleGcs'
    # S3 configuration
    awsS3:
      # S3 bucket for TechDocs storage
      bucketName: ${TECHDOCS_S3_BUCKET_NAME}
      # AWS region
      region: ${AWS_REGION:-us-east-1}
      # S3 bucket path prefix
      bucketRootPath: 'techdocs'
      # Enable server-side encryption
      sse: 'AES256'
      # Optional: Custom endpoint for S3-compatible storage
      # endpoint: ${S3_ENDPOINT}
      # Optional: Force path style for S3-compatible storage
      # forcePathStyle: true
      # Optional: Custom credentials (uses AWS SDK default chain if not specified)
      # credentials:
      #   accessKeyId: ${AWS_ACCESS_KEY_ID}
      #   secretAccessKey: ${AWS_SECRET_ACCESS_KEY}
  # Cache configuration for better performance
  cache:
    # Enable caching
    enabled: true
    # Cache TTL in seconds (1 hour)
    ttl: 3600
    # Cache size limit in MB
    sizeLimit: 1000
  # Documentation rebuild triggers and timing
  rebuild:
    # Enable automatic rebuilds
    enabled: true
    # Rebuild triggers
    triggers:
      # Rebuild on catalog entity changes
      catalogEntityChange: true
      # Rebuild on repository changes (webhook)
      repositoryChange: true
      # Rebuild on schedule
      schedule:
        # Rebuild frequency (daily at 2 AM)
        frequency: { hours: 24 }
        # Initial delay before first rebuild
        initialDelay: { minutes: 5 }
    # Rebuild timeout in minutes
    timeout: 30
  # Search integration configuration
  search:
    # Enable TechDocs search indexing
    enabled: true
    # Search index update frequency
    indexUpdateFrequency: { minutes: 10 }
    # Search result ranking
    ranking:
      # Boost recent documents
      recencyBoost: 1.2
      # Boost documents with more views
      popularityBoost: 1.1

auth:
  # see https://backstage.io/docs/auth/ to learn about auth providers
  providers:
    # GitHub OAuth provider
    github:
      development:
        clientId: ${AUTH_GITHUB_CLIENT_ID}
        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}
    # See https://backstage.io/docs/auth/guest/provider
    guest: {}

scaffolder:
  # see https://backstage.io/docs/features/software-templates/configuration for software template options
  # Enhanced scaffolder actions configuration
  actions:
    # Roadie utils actions configuration
    roadiehq:
      utils:
        # GitHub integration for enhanced actions
        github:
          token: ${GITHUB_TOKEN}
        # File system operations
        fs:
          # Enable file replacement operations
          enableReplace: true

catalog:
  import:
    entityFilename: catalog-info.yaml
    pullRequestBranchName: backstage-integration
  rules:
    - allow: [Component, System, API, Resource, Location]
  # Enable Terraform provider integration - not read-only
  readonly: false
  # Optimized catalog processing with deferred stitching
  processing:
    cache:
      ttl: 300 # 5 minutes cache for better performance
    stitching:
      strategy: deferred # Defer stitching for better performance
  providers:
    github:
      # GitHub organization discovery with optimized settings
      organization:
        organization: ${GITHUB_ORG} # GitHub organization name
        catalogPath: '/catalog-info.yaml' # path to catalog-info.yaml files
        filters:
          branch: 'main' # default branch to scan
          repository: '.*' # regex to match repository names
        schedule: # optimized discovery schedule
          frequency: { minutes: 30 }
          timeout: { minutes: 3 }
          initialDelay: { seconds: 15 }
  locations:
    # Local example data, file locations are relative to the backend process, typically `packages/backend`
    - type: file
      target: ../../examples/entities.yaml

    # Local example template
    - type: file
      target: ../../examples/template/template.yaml
      rules:
        - allow: [Template]

    # Local example organizational data
    - type: file
      target: ../../examples/org.yaml
      rules:
        - allow: [User, Group]

    ## Uncomment these lines to add more example data
    # - type: url
    #   target: https://github.com/backstage/backstage/blob/master/packages/catalog-model/examples/all.yaml

    ## Uncomment these lines to add an example org
    # - type: url
    #   target: https://github.com/backstage/backstage/blob/master/packages/catalog-model/examples/acme-corp.yaml
    #   rules:
    #     - allow: [User, Group]

kubernetes:
  # see https://backstage.io/docs/features/kubernetes/configuration for kubernetes configuration options
  serviceLocatorMethod:
    type: 'multiTenant'
  clusterLocatorMethods:
    - type: 'config'
      clusters:
        - url: ${K8S_CLUSTER_URL}
          name: ${K8S_CLUSTER_NAME:-production}
          authProvider: 'serviceAccount'
          serviceAccountToken: ${K8S_SERVICE_ACCOUNT_TOKEN}
          skipTLSVerify: ${K8S_SKIP_TLS_VERIFY:-false}
          skipMetricsLookup: false
          # Custom resources for topology visualization
          customResources:
            - group: 'route.openshift.io'
              apiVersion: 'v1'
              plural: 'routes'
            - group: 'tekton.dev'
              apiVersion: 'v1beta1'
              plural: 'pipelineruns'
            - group: 'kubevirt.io'
              apiVersion: 'v1'
              plural: 'virtualmachines'
            - group: 'argoproj.io'
              apiVersion: 'v1alpha1'
              plural: 'applications'

# see https://backstage.io/docs/permissions/getting-started for more on the permission framework
permission:
  # setting this to `false` will disable permissions
  enabled: true

# Tech Radar configuration for technology tracking
techRadar:
  # Technology adoption visualization configuration
  visualization:
    # Enable quadrants, rings, and entry timelines for tech stack
    quadrants:
      - name: 'Languages & Frameworks'
        id: 'languages-frameworks'
      - name: 'Tools'
        id: 'tools'
      - name: 'Platforms'
        id: 'platforms'
      - name: 'Techniques'
        id: 'techniques'
    # Technology adoption rings
    rings:
      - name: 'Adopt'
        id: 'adopt'
        color: '#5ba300'
      - name: 'Trial'
        id: 'trial'
        color: '#009eb0'
      - name: 'Assess'
        id: 'assess'
        color: '#c7ba00'
      - name: 'Hold'
        id: 'hold'
        color: '#e09b96'
  # Team technology decision tracking and communication
  tracking:
    # Enable team technology decision tracking
    enabled: true
    # Show entry timelines
    showTimelines: true
    # Show technology descriptions and rationale
    showDescriptions: true
    # Enable technology change notifications
    notifications: true
  # Data source configuration
  data:
    # Tech radar data source (can be 'static', 'github', or 'api')
    source: 'static'
    # Static data configuration
    static:
      # Default tech radar entries
      entries:
        - name: 'React'
          quadrant: 'languages-frameworks'
          ring: 'adopt'
          moved: 0
          description: 'JavaScript library for building user interfaces'
        - name: 'TypeScript'
          quadrant: 'languages-frameworks'
          ring: 'adopt'
          moved: 0
          description: 'Typed superset of JavaScript'
        - name: 'Backstage'
          quadrant: 'platforms'
          ring: 'adopt'
          moved: 1
          description: 'Open platform for building developer portals'
        - name: 'Kubernetes'
          quadrant: 'platforms'
          ring: 'adopt'
          moved: 0
          description: 'Container orchestration platform'
        - name: 'Docker'
          quadrant: 'tools'
          ring: 'adopt'
          moved: 0
          description: 'Containerization platform'
        - name: 'GitHub Actions'
          quadrant: 'tools'
          ring: 'adopt'
          moved: 0
          description: 'CI/CD platform integrated with GitHub'
        - name: 'Argo CD'
          quadrant: 'tools'
          ring: 'adopt'
          moved: 1
          description: 'GitOps continuous delivery tool for Kubernetes'
        - name: 'Datadog'
          quadrant: 'tools'
          ring: 'adopt'
          moved: 0
          description: 'Monitoring and analytics platform'
        - name: 'Microservices'
          quadrant: 'techniques'
          ring: 'adopt'
          moved: 0
          description: 'Architectural approach for building distributed systems'
        - name: 'Infrastructure as Code'
          quadrant: 'techniques'
          ring: 'adopt'
          moved: 0
          description: 'Managing infrastructure through code'
        - name: 'GraphQL'
          quadrant: 'languages-frameworks'
          ring: 'trial'
          moved: 1
          description: 'Query language and runtime for APIs'
        - name: 'Istio'
          quadrant: 'platforms'
          ring: 'assess'
          moved: 0
          description: 'Service mesh platform'
        - name: 'WebAssembly'
          quadrant: 'languages-frameworks'
          ring: 'assess'
          moved: 0
          description: 'Binary instruction format for web applications'
    # GitHub data source configuration (alternative to static)
    github:
      # Repository containing tech radar data
      repository: '${GITHUB_ORG}/tech-radar'
      # Path to tech radar data file
      path: 'radar.json'
      # Branch to read from
      branch: 'main'
    # API data source configuration (alternative to static)
    api:
      # API endpoint for tech radar data
      endpoint: '${TECH_RADAR_API_URL}'
      # Authentication headers
      headers:
        Authorization: 'Bearer ${TECH_RADAR_API_TOKEN}'

# S3 Viewer configuration for AWS S3 bucket and object viewing
s3Viewer:
  # S3 connections configuration
  connections:
    # Production S3 buckets
    - name: 'production-assets'
      endpoint: 'https://s3.amazonaws.com'
      region: '${AWS_REGION:-us-east-1}'
      buckets:
        - name: '${S3_ASSETS_BUCKET:-company-assets-prod}'
          prefix: 'assets/'
        - name: '${S3_LOGS_BUCKET:-company-logs-prod}'
          prefix: 'logs/'
    # Staging S3 buckets
    - name: 'staging-assets'
      endpoint: 'https://s3.amazonaws.com'
      region: '${AWS_REGION:-us-east-1}'
      buckets:
        - name: '${S3_ASSETS_BUCKET_STAGING:-company-assets-staging}'
          prefix: 'assets/'
        - name: '${S3_LOGS_BUCKET_STAGING:-company-logs-staging}'
          prefix: 'logs/'
    # Development S3 buckets
    - name: 'development-assets'
      endpoint: 'https://s3.amazonaws.com'
      region: '${AWS_REGION:-us-east-1}'
      buckets:
        - name: '${S3_ASSETS_BUCKET_DEV:-company-assets-dev}'
          prefix: 'assets/'
  # Authentication configuration
  auth:
    # Use AWS SDK default credential chain
    useDefaultCredentials: true
    # Optional: Custom credentials
    # accessKeyId: ${AWS_ACCESS_KEY_ID}
    # secretAccessKey: ${AWS_SECRET_ACCESS_KEY}
    # sessionToken: ${AWS_SESSION_TOKEN}
  # UI configuration
  ui:
    # Enable object preview for images and text files
    enablePreview: true
    # Enable object download
    enableDownload: true
    # Maximum file size for preview (in bytes)
    maxPreviewSize: 10485760 # 10MB
    # Supported preview file types
    previewTypes: ['jpg', 'jpeg', 'png', 'gif', 'svg', 'txt', 'md', 'json', 'yaml', 'yml']
  # Permissions configuration
  permissions:
    # Enable bucket listing
    allowListing: true
    # Enable object download
    allowDownload: true
    # Enable object preview
    allowPreview: true
